<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    <title>Login</title>
    <style>
        #messages{height:300px;}
    </style>
</head>
<body>
    <div class="container">
      <div class="row">
        <div class="col-md-6 offset-md-3 col-sm-12">
          <div style='padding-top:10px'> <h2>Sign Up </h2> </div>
          <div id="forms" onkeydown='enterSignUp(event)'>
            <input id="username" type="text" placeholder="Username" class="form-control">
            <br>
            <input id="password" type="password" placeholder="Password">
            <br>
            <input id="repeat_password" type="password" placeholder="Repeat Password">
            <div id="error_message"></div>
          </div>

          <button onclick='signUp()' type="button">Sign Up!</button>
        </div>
      </div>

    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.3/socket.io.js"></script>

    <script>
        function signUp() {
          var username = document.getElementById("username").value;
          var password = document.getElementById("password").value;
          var repeatPassword = document.getElementById("repeat_password").value;
          //TODO delete later lol
          var errorString = "";
          if(username == "") {errorString += "Please enter a usernamex";}
          if(password == "") {errorString += "Please enter a passwordx";}
          if(repeatPassword == "") {errorString += "Please repeat your passwordx";}
          if(password !== repeatPassword) {errorString += "Your passwords do not matchx";}

          var errorDiv = document.getElementById("error_message");
          while(errorDiv.firstChild) {
            errorDiv.removeChild(errorDiv.firstChild);
          }
          document.getElementById("errorMessage")
          if(errorString.length > 0) {
            var errStrings = errorString.split("x");
            for(var i = 0; i < errStrings.length-1; i++) {
              var newDiv = document.createElement("div");
              newDiv.textContent = errStrings[i];
              newDiv.setAttribute("style", "color:#f23118")
              errorDiv.appendChild(newDiv);
            }
          }
          else {
            socket.emit('signUp', {
                username:username,
                password:password
            });
          }
        }

        function enterSignUp(event) {
          if(event.which == 13 || event.keyCode == 13) {
            signUp();
          }
        }
    </script>
</body>
</html>
